<!--

Author: Michael SpÃ¶rk, John Palade

Usersite

-->

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
					xmlns:ui="http://java.sun.com/jsf/facelets"
					xmlns:f="http://java.sun.com/jsf/core"
					xmlns:h="http://java.sun.com/jsf/html"
					xmlns:p="http://primefaces.org/ui"
					template="/template/main.xhtml">

  <ui:define name="content">

	<h:form id="userForm">
		<p:panel header="User" style="width:400px">
		
		<table>
			<tr>
				<td>Username:</td>
				<td>
					<p:inputText id="userName" value="#{userSiteController.username}" label="Username" readonly="#{userSiteController.otherUser}">
	            	</p:inputText>
				</td>
			</tr>
			<tr>
				<td>email:</td>
				<td>
					<p:inputText id="eMail" value="#{userSiteController.email}" label="Email" readonly="#{userSiteController.otherUser}">
						<f:validateRegex pattern=".*\@\w*\.\w*" />
	            	</p:inputText>
				</td>
			</tr>
			<tr>
				<td>phone:</td>
				<td>
					<p:inputText id="phoneNumber" value="#{userSiteController.phoneNumber}" label="PhoneNumber" readonly="#{userSiteController.otherUser}">
	                	<f:validateLength minimum="3" maximum="8" />
	            	</p:inputText>
				</td>
			</tr>
		</table>

		</p:panel>
	</h:form>
		
	<p:growl id="growl" life="5000" />
	<br/>
		
	<p:commandButton value="Save" id="saveUserdata" update="growl" actionListener="#{userSiteController.editUser}" disabled="#{userSiteController.otherUser}" styleClass="ui-priority-primary" />
	  	
	<br/>
	<br/>
	
	<h:form id="contactForm" style="width:400px">
		<p:dataList value="#{userSiteController.contacts}" var="contact" type="ordered">
		      <f:facet name="header">
		          Contacts
		      </f:facet>
		      #{contact.username}, #{contact.email}
		</p:dataList>
	</h:form>
	
	<br/>
	
	<p:commandButton value="add contact" id="usersiteAddContact" update="growl" actionListener="#{userSiteController.editUser}" disabled="#{userSiteController.otherUser}" styleClass="ui-priority-primary" />
	<p:commandButton value="remove contact" id="usersiteRemoveContact" update="growl" actionListener="#{userSiteController.editUser}" disabled="#{userSiteController.otherUser}" styleClass="ui-priority-primary" />
	
	
	<br/>
	<br/>
	<br/>
	<br/>
	
	
	<!-- The following two buttons are for testing only. They enable and disable the other elements to demonstrate this functionality.  -->
	<p:commandButton value="Disable Buttons" id="disableButtons" styleClass="ui-priority-primary" update="saveUserdata usersiteAddContact usersiteRemoveContact userForm:userName userForm:eMail userForm:phoneNumber">
		<f:setPropertyActionListener value="#{true}" target="#{userSiteController.otherUser}"/>
	</p:commandButton>
	  
	<p:commandButton value="Enable Buttons" id="enableButtons" styleClass="ui-priority-primary" update="saveUserdata usersiteAddContact usersiteRemoveContact userForm:userName userForm:eMail userForm:phoneNumber">
		<f:setPropertyActionListener value="#{false}" target="#{userSiteController.otherUser}"/>
	</p:commandButton>
	
	<!-- selection of contacts is not part of the first iteration and so the following part is commented out-->
	
	
	<!--  p:dataList value="#{userSiteController.contacts}" var="contacts" type="unordered" itemType="none" paginator="true" rows="10" styleClass="paginated">
	      <f:facet name="header">
	          Contacts
	      </f:facet>
	      <p:commandLink update=":form:contactDetail" oncomplete="PF('carDialog').show()" title="View Detail" styleClass="ui-icon ui-icon-search" style="float:left;margin-right:10px">
	         <f:setPropertyActionListener value="#{user}" target="#{userSiteController.selectedUser}" />
	         <h:outputText value="#{user.username}, #{user.email}" />
	     </p:commandLink>
	     <h:outputText value="#{user.username}, #{user.email}" style="display:inline-block"/>
	 </p:dataList>-->
    
  </ui:define>
    
</ui:composition>